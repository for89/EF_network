---
title: "Mapping the Structure of Executive Function in Early Childhood: A Network Analysis Approach" 
shorttitle: "Mapping Executive Function"

author:
- name: "Fionnuala O'Reilly" 
  orcid: 0000-0002-4355-9088 
  affiliations: 
    - ref: stanford

- name: "Jelena Sucevic" 
  orcid: 0000-0001-5091-5434 
  affiliations: 
    - ref: oxford

- name: "Steven Howard" 
  orcid: 0000-0002-1258-3210 
  affiliations: 
    - ref: wollongong

- name: "Gaia Scerif" 
  orcid: 0000-0002-6371-8874 
  affiliations: 
    - ref: wollongong

affiliations: 
  - id: stanford 
    name: "Stanford University" 
  - id: oxford 
    name: "University of Oxford" 
  - id: wollongong 
    name: "University of Wollongong"

author-note: 
  disclosures: 
    financial-support: "This work was supported by X." 
    conflict-of-interest: "The author has no conflict of interest to declare."

abstract: TO BE ADDED.

keywords: ["executive function"] 
word-count: true

bibliography: library.bib

floatsintext: true
numbered-lines: true
# draft: false
mask: false

# figurelist: no
# tablelist: no
# footnotelist: no

format:
  apaquarto-pdf:
    documentmode: man
    keep-tex: true
    include-in-header: preamble.tex
    fig-format: png
    # fig-pos: H        
    # tbl-pos: H

knitr:
  opts_chunk:
    ft.arraystretch: 1.25

execute:
  echo: false 
  message: false 
  warning: false 
  error: true 
  cache: true
---

```{r setup}
#| include: false
#| cache: false

library(tidyverse)
library(here)
library(glue)
library(purrr)
library(viridis)
library(flextable)
library(lavaan)
library(mirt)
library(broom.mixed)
library(lmerTest)
library(png)
library(emmeans)
```

```{r load data}
#| cache: false

#load data

aus_data <- read_sav("~/Library/CloudStorage/GoogleDrive-foreilly@stanford.edu/My Drive/EF_network analysis/DECRA Master Dataset (T1-T3) 2020-10-16 (1).sav")
colnames(aus_data)
View(aus_data)
```

```{r explore data}
#| cache: false

ef_vars <- c(
  "MrAnt_Pt_T1","GNG_IC_T1","CS_SwAcc_T1",
  "MrAnt_Pt_T2","GNG_IC_T2","CS_SwAcc_T2",
  "MrAnt_Pt_T3","GNG_IC_T3","CS_SwAcc_T3"
)

# EF t1 vars
ggplot(aus_data, aes(x = Age, y = MrAnt_Pt_T1)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

ggplot(aus_data, aes(x = Age, y = GNG_IC_T1)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

ggplot(aus_data, aes(x = Age, y = CS_SwAcc_T1)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

# EF t2 vars
ggplot(aus_data, aes(x = Age, y = MrAnt_Pt_T2)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

ggplot(aus_data, aes(x = Age, y = GNG_IC_T2)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

ggplot(aus_data, aes(x = Age, y = CS_SwAcc_T2)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

# EF t3 vars
ggplot(aus_data, aes(x = Age, y = MrAnt_Pt_T3)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

ggplot(aus_data, aes(x = Age, y = GNG_IC_T3)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

ggplot(aus_data, aes(x = Age, y = CS_SwAcc_T3)) +
  geom_point() +
  geom_smooth(method = "lm", se = TRUE)

# missingness
miss_var <- aus_data |>
  summarise(across(all_of(ef_vars),
                   list(n_miss = ~sum(is.na(.)),
                        pct_miss = ~mean(is.na(.))*100,
                        n_nonmiss = ~sum(!is.na(.))),
                   .names = "{.col}__{.fn}")) |>
  pivot_longer(everything(),
               names_to = c("variable","metric"),
               names_sep = "__",
               values_to = "value") |>
  pivot_wider(names_from = metric, values_from = value) |>
  arrange(desc(pct_miss))

miss_var

```

```{r}

```





































